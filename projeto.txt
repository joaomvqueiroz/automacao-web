Conte√∫do
Cap√≠tulo 1 ‚Äì Introdu√ß√£o e Planeamento	4
1.1 Objetivo Geral do Projeto	4
1.2 Arquitetura do Ambiente e Tecnologias Selecionadas	4
1.3 Planeamento e Roadmap de Implementa√ß√£o	5
1.4 Estrutura da Documenta√ß√£o T√©cnica	5
1.5 Considera√ß√µes sobre o Cen√°rio de Simula√ß√£o	5
Cap√≠tulo 2 ‚Äì Configura√ß√£o do GitHub	6
2.1 Instala√ß√£o e Configura√ß√£o Inicial de Ferramentas	6
2.2 Configura√ß√£o do Projeto Local e Reposit√≥rio	6
2.3 Publica√ß√£o e Autentica√ß√£o no GitHub	7
2.4 Fluxo de Trabalho em M√°quina Virtual (Terminal)	7
2.5 Colabora√ß√£o e Atualiza√ß√µes	7
Cap√≠tulo 3 ‚Äì Implementa√ß√£o de Servi√ßos Principais (LAMP Stack)	8
3.1 Instala√ß√£o e Configura√ß√£o Base do CentOS Stream 9	8
3.2 Configura√ß√£o da Interface de Rede e IP P√∫blico Simulado	8
3.3 Instala√ß√£o e Verifica√ß√£o do Servidor Apache (HTTPD)	9
3.4 Instala√ß√£o e Configura√ß√£o do PHP (Vers√£o 8.2)	9
3.5 Instala√ß√£o e Configura√ß√£o Segura do MariaDB	10
3.6 Cria√ß√£o da Base de Dados e Tabela de Reservas	10
3.7 Testes de Conectividade e Operacionalidade	11
Cap√≠tulo 4 ‚Äì Conectividade e Acesso Seguro (IP P√∫blico e SSL)	11
Cap√≠tulo 4.1 ‚Äî Configurar o servi√ßo DuckDNS	11
4.2. Configura√ß√£o do Apache para Acesso Cifrado (HTTPS)	13
Cap√≠tulo 5 ‚Äì Seguran√ßa do Servidor (Hardening)	15
5.1 Objetivo	15
5.2 Atualiza√ß√£o e Patches do Sistema	15
5.3 Gest√£o de Utilizadores e Permiss√µes	15
5.4 Configura√ß√£o de Firewall (firewalld)	16
5.5 Prote√ß√£o Contra Ataques ‚Äì Fail2ban	16
5.6 Auditoria e Monitoriza√ß√£o	17
5.10 Implementa√ß√£o do Web Application Firewall (ModSecurity)	17
5.11 Ajustes Adicionais de Seguran√ßa (SELinux e Firewalld)	18
5.12 Autentica√ß√£o B√°sica no Painel Administrativo	18
5.13 Conclus√£o	18
Cap√≠tulo 6 ‚Äì Otimiza√ß√£o de Desempenho (Tuning)	19
6.1. Tuning do PHP (php.ini)	19
6.2. Tuning do MariaDB (my.cnf)	19
6.3. Tuning do Apache (HTTPD)	20
6.4. Conclus√£o	21
Cap√≠tulo 7 ‚Äì Manuten√ß√£o e Continuidade de Servi√ßo	21
7.1 Objetivo	21
7.2 Configura√ß√£o de Backups Di√°rios	21
7.3 Sincroniza√ß√£o Hor√°ria via NTP (chronyd)	21
7.4 Configura√ß√£o de Atualiza√ß√µes Autom√°ticas	22
7.5 Monitoriza√ß√£o de Logs e Rota√ß√£o Autom√°tica	22
7.6 Valida√ß√£o de Continuidade de Servi√ßo	23
7.7 Boas Pr√°ticas de Manuten√ß√£o	23
7.8 Conclus√£o	23
Cap√≠tulo 8 ‚Äì Valida√ß√£o, Resultados e Documenta√ß√£o Final	24
8.1. Objetivo	24
8.2. Testes Funcionais, de Desempenho e Anexos (Configura√ß√µes e Logs)	24
8.2. Valida√ß√£o dos Resultados Esperados	29
8.3. Conclus√£o e Li√ß√µes Aprendidas	29

 
Cap√≠tulo 1 ‚Äì Introdu√ß√£o e Planeamento
1.1 Objetivo Geral do Projeto
O presente projeto t√©cnico teve como objetivo instalar, configurar, otimizar e validar um servidor Linux baseado na distribui√ß√£o CentOS Stream 9, destinado ao alojamento de um website din√¢mico com acesso externo simulado.
O principal prop√≥sito consistiu em criar um ambiente de alojamento profissional e seguro utilizando a stack LAMP (Linux, Apache, MariaDB e PHP), cumprindo os seguintes pilares fundamentais:
‚Ä¢	Seguran√ßa Robusta: Aplica√ß√£o de medidas de hardening em m√∫ltiplas camadas (FirewallD, SELinux, Fail2ban e ModSecurity).
‚Ä¢	Desempenho Otimizado: Implementa√ß√£o de tuning espec√≠fico para Apache (MPM), PHP e MariaDB.
‚Ä¢	Continuidade de Servi√ßo: Configura√ß√£o de backups autom√°ticos e rotinas de manuten√ß√£o agendadas.
1.2 Arquitetura do Ambiente e Tecnologias Selecionadas
A arquitetura do projeto baseou-se no modelo LAMP, amplamente utilizado em ambientes empresariais pela sua estabilidade, compatibilidade e facilidade de integra√ß√£o.
Componente	Tecnologia / Vers√£o	Justifica√ß√£o T√©cnica
Sistema Operativo (L)	CentOS Stream 9	Distribui√ß√£o Linux de n√≠vel empresarial (derivada do RHEL), reconhecida pela estabilidade, longo ciclo de suporte e mecanismos de seguran√ßa avan√ßados (SELinux).
Servidor Web (A)	Apache HTTPD 2.4+	Servidor maduro, altamente configur√°vel e amplamente compat√≠vel com m√≥dulos de seguran√ßa, como o ModSecurity.
Base de Dados (M)	MariaDB 10+	Fork do MySQL, com melhorias significativas em desempenho e seguran√ßa sob carga elevada.
Linguagem (P)	PHP 8+	Respons√°vel pelo processamento din√¢mico do website, oferecendo melhor desempenho e suporte moderno.
Seguran√ßa	Fail2ban / ModSecurity	Ferramentas complementares que asseguram prote√ß√£o contra ataques de for√ßa bruta e vulnerabilidades de aplica√ß√µes web.

1.3 Planeamento e Roadmap de Implementa√ß√£o
O projeto foi desenvolvido em duas fases principais, distribu√≠das ao longo de um per√≠odo simulado de duas semanas, de forma a refletir o ciclo completo de planeamento, implementa√ß√£o e otimiza√ß√£o.
Semana	Etapas Principais	Foco e Objetivos
1¬™ Semana	Planeamento e Instala√ß√£o da Base	Instala√ß√£o da stack LAMP, configura√ß√£o do IP est√°tico e ativa√ß√£o inicial do FirewallD.
2¬™ Semana	Seguran√ßa, Tuning e Valida√ß√£o	Aplica√ß√£o do hardening (Fail2ban, ModSecurity, SSL/TLS), ajustes de desempenho e cria√ß√£o de rotinas de backup e manuten√ß√£o.
1.4 Estrutura da Documenta√ß√£o T√©cnica
Toda a documenta√ß√£o e configura√ß√£o foram organizadas nos diret√≥rios padr√£o do CentOS, seguindo as boas pr√°ticas de administra√ß√£o de sistemas, facilitando futuras manuten√ß√µes e auditorias.
Diret√≥rio / Ficheiro	Fun√ß√£o
/var/www/html/	Diret√≥rio raiz do website (DocumentRoot do Apache).
/etc/httpd/	Diret√≥rio principal de configura√ß√£o do Apache (inclui httpd.conf e ficheiros de m√≥dulos).
/etc/php.ini	Ficheiro global de configura√ß√£o do PHP, ajustado para otimiza√ß√£o de desempenho.
/etc/my.cnf.d/	Diret√≥rio de configura√ß√£o do MariaDB, onde foram aplicados os par√¢metros de tuning.
/etc/fail2ban/	Diret√≥rio que cont√©m as regras e filtros do sistema de preven√ß√£o de intrus√µes.
1.5 Considera√ß√µes sobre o Cen√°rio de Simula√ß√£o
O projeto foi desenvolvido num ambiente virtualizado (VMware ou VirtualBox), reproduzindo as condi√ß√µes operacionais de um servidor de produ√ß√£o com acesso remoto e pol√≠ticas de seguran√ßa ativas.
1.	Acesso Remoto: Todas as opera√ß√µes de administra√ß√£o foram realizadas via SSH (porta 22), simulando a gest√£o remota de um servidor em datacenter.
2.	IP P√∫blico Simulado: O servidor utilizou o endere√ßo 192.168.1.100 como IP est√°tico, acess√≠vel externamente a partir de um cliente na mesma rede.
3.	Ambiente Controlado: O sistema manteve o SELinux em modo Enforcing e o FirewallD ativo desde a fase inicial de instala√ß√£o.
4.	Recursos Limitados: As otimiza√ß√µes descritas (ver Cap√≠tulo 5) foram aplicadas a uma m√°quina com 2 GB de RAM e 2 vCPUs, demonstrando a efici√™ncia das t√©cnicas de tuning mesmo em ambientes de baixo custo.
Cap√≠tulo 2 ‚Äì Configura√ß√£o do GitHub
2.1 Instala√ß√£o e Configura√ß√£o Inicial de Ferramentas
Para garantir um ambiente de desenvolvimento integrado, funcional e compat√≠vel com o servidor LAMP, foram instaladas as seguintes ferramentas de suporte ao ciclo de desenvolvimento e controlo de vers√µes:
Git
Linux (CentOS / Red Hat): 
sudo dnf install git-all -y
‚Ä¢	Windows: instala√ß√£o do Git for Windows atrav√©s do site oficial.
Visual Studio Code (VS Code)
‚Ä¢	Instaladar a extens√£o Live Server para pr√©-visualiza√ß√£o local de p√°ginas web.
Node.js
‚Ä¢	Instala√ß√£o a partir do site oficial: https://nodejs.org/pt-br/
Mountebank
‚Ä¢	Instala√ß√£o global via npm:
npm install -g mountebank
‚Ä¢	Aceder a http://localhost:2525 para confirmar o funcionamento local.
Configura√ß√£o de Execu√ß√£o no PowerShell (Windows)
Para permitir a execu√ß√£o de scripts locais, foi necess√°rio definir a pol√≠tica:
Set-ExecutionPolicy RemoteSigned
Estas ferramentas garantem a integra√ß√£o entre o desenvolvimento local, a simula√ß√£o virtual e o controlo de vers√µes remoto atrav√©s do GitHub.
2.2 Configura√ß√£o do Projeto Local e Reposit√≥rio
Com o ambiente configurado, o projeto foi preparado para controlo de vers√µes com o Git.
Criar a pasta principal:
C:\DEV\
‚Ä¢	Abrir o projeto no VS Code.
‚Ä¢	Testar o ficheiro principal index.html com a extens√£o Live Server.
‚Ä¢	Inicializar o reposit√≥rio Git:
‚Ä¢	No menu Controle de C√≥digo-Fonte do VS Code ‚Üí Inicializar Reposit√≥rio Git.
2.3 Publica√ß√£o e Autentica√ß√£o no GitHub
Com o projeto local configurado, procedeu-se √† publica√ß√£o no GitHub para garantir rastreabilidade, backup remoto e colabora√ß√£o entre utilizadores.
1.	Autentica√ß√£o no VS Code:
Fazer login na conta GitHub atrav√©s do √≠cone de perfil ‚Üí Sign in to GitHub.
2.	Publicar o reposit√≥rio:
Clicar em Publicar Branch para enviar o projeto ao GitHub.
3.	Cria√ß√£o do Personal Access Token (PAT):
o	No GitHub, aceder a:
Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Tokens (classic)
o	Selecionar Generate new token (classic) e ativar o scope repo.
o	Copiar o token gerado (utilizado no lugar da palavra-passe em opera√ß√µes remotas).
2.4 Fluxo de Trabalho em M√°quina Virtual (Terminal)
Para simular o ambiente de desenvolvimento remoto, o projeto foi clonado e manipulado numa m√°quina virtual CentOS.
Procedimentos:
# Criar diret√≥rio de trabalho
mkdir Proj && cd Proj

# Clonar o reposit√≥rio remoto
git clone https://github.com/joaomvqueiroz/html.git

# Aceder ao diret√≥rio do projeto
cd DEMOHTML

# Editar ficheiros e sincronizar altera√ß√µes
git add .
git commit -m "Atualiza√ß√£o do README"
git push -u origin main
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

Durante o push, o sistema solicita o username GitHub e o PAT no campo de password, simulando o processo real de publica√ß√£o remota.
2.5 Colabora√ß√£o e Atualiza√ß√µes
Para manter o reposit√≥rio sincronizado e permitir trabalho colaborativo, foram definidos os seguintes procedimentos:
‚Ä¢	Atualiza√ß√£o do reposit√≥rio local:
git pull origin main
Este comando sincroniza a c√≥pia local com as √∫ltimas altera√ß√µes do reposit√≥rio remoto.
‚Ä¢	Gest√£o de Colaboradores:
No GitHub, aceder a:
Settings ‚Üí Collaborators
Cap√≠tulo 3 ‚Äì Implementa√ß√£o de Servi√ßos Principais (LAMP Stack)
Este cap√≠tulo descreve a instala√ß√£o e configura√ß√£o inicial dos principais componentes da stack LAMP ‚Äî Linux, Apache, MariaDB e PHP ‚Äî preparando o servidor CentOS Stream 9 para alojar o website din√¢mico do projeto.
3.1 Instala√ß√£o e Configura√ß√£o Base do CentOS Stream 9
A m√°quina virtual foi criada no VMware Workstation, utilizando o CentOS Stream 9 como sistema operativo base. Ap√≥s a instala√ß√£o, foram aplicadas atualiza√ß√µes e reposit√≥rios adicionais (EPEL) para garantir estabilidade e compatibilidade.
A√ß√£o	Comando
Atualiza√ß√£o inicial	sudo dnf update -y
Instala√ß√£o do reposit√≥rio EPEL	sudo dnf install epel-release -y
Verifica√ß√£o da vers√£o do sistema	cat /etc/os-release
3.2 Configura√ß√£o da Interface de Rede e IP P√∫blico Simulado
Para permitir o acesso est√°vel ao servidor, a interface de rede (ex: ens33) foi configurada com um endere√ßo IP est√°tico (192.168.1.100) no modo Bridge, simulando um IP p√∫blico.
Configura√ß√£o do ficheiro /etc/sysconfig/network-scripts/ifcfg-ens33:
Par√¢metro	Valor Aplicado
BOOTPROTO	static
IPADDR	192.168.1.10
NETMASK	255.255.255.0
GATEWAY	192.168.1.254
DNS1	8.8.8.8
Comandos de aplica√ß√£o: nmtui




3.3 Instala√ß√£o e Verifica√ß√£o do Servidor Apache (HTTPD)
O Apache HTTP Server foi instalado e configurado para aceitar liga√ß√µes HTTP na porta 80, tornando-se o principal componente de alojamento web do sistema.
Instala√ß√£o e ativa√ß√£o:
A√ß√£o	Comando
Instalar o Apache	sudo dnf install httpd -y
Ativar e iniciar o servi√ßo	sudo systemctl enable httpd
 sudo systemctl start httpd
Verificar o estado do servi√ßo	sudo systemctl status httpd

Configura√ß√£o da firewall (FirewallD):
A√ß√£o	Comando
Abrir portas HTTP(80)/HTTPS(443)	sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
Aplicar altera√ß√µes	sudo firewall-cmd --reload

Valida√ß√£o:
Acedendo ao endere√ßo http://192.168.1.100 no browser, foi exibida a p√°gina padr√£o do Apache, confirmando o funcionamento correto do servi√ßo.
3.4 Instala√ß√£o e Configura√ß√£o do PHP (Vers√£o 8.2)
Para permitir a execu√ß√£o de p√°ginas din√¢micas, foi instalada a vers√£o PHP 8.2, juntamente com os m√≥dulos essenciais para integra√ß√£o com o Apache e o MariaDB.
Instala√ß√£o dos m√≥dulos:
A√ß√£o	Comando
Reiniciar e ativar o m√≥dulo PHP 8.2	sudo dnf module reset php -y
 sudo dnf module enable php:8.3.7 -y
Instalar PHP e m√≥dulos complement	sudo dnf install php-cli php-mysqlnd php-gd php-xml php-json php-mbstring -y
	sudo dnf install https://rpms.remirepo.net/enterprise/remi-release-9.rpm -y
 Instala√ß√£o e Confirma√ß√£o	sudo dnf install php php-cli php-fpm php-mysqlnd -y

Valida√ß√£o do PHP:
A√ß√£o	Comando
Verificar vers√£o instalada	php -v
Criar ficheiro de teste (info.php)	echo "<?php phpinfo(); ?>" > /var/www/html/info.php
Reiniciar o Apache	sudo systemctl restart httpd
Valida√ß√£o via browser: Acedendo a http://192.168.1.100/info.php, foi apresentada a p√°gina de informa√ß√µes do PHP, confirmando a integra√ß√£o com o Apache.
3.5 Instala√ß√£o e Configura√ß√£o Segura do MariaDB
O MariaDB Server foi instalado para gerir a base de dados relacional da aplica√ß√£o. De seguida, foi executado o assistente de seguran√ßa para endurecer o acesso ao servi√ßo.
Instala√ß√£o e ativa√ß√£o:
A√ß√£o	Comando
Instalar MariaDB	sudo dnf install mariadb-server -y
Ativar e iniciar o servi√ßo	sudo systemctl enable mariadb
sudo systemctl start mariadb
Configura√ß√£o de seguran√ßa inicial:
sudo mysql_secure_installation
Durante o processo, foram aplicadas as seguintes medidas:
‚Ä¢	Defini√ß√£o de password para o utilizador root;
‚Ä¢	Remo√ß√£o de utilizadores an√≥nimos;
‚Ä¢	Elimina√ß√£o da base de dados de teste;
‚Ä¢	Bloqueio de acesso remoto √† conta root.
3.6 Cria√ß√£o da Base de Dados e Tabela de Reservas
Foi criada a base de dados sabor_do_mar, o utilizador web_user, e a tabela reservas, respons√°vel por armazenar os dados submetidos atrav√©s do formul√°rio web.
Comando SQL Executado:
USE sabor_do_mar;
CREATE TABLE reservas (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    telefone VARCHAR(20),
    data DATE NOT NULL,
    hora TIME NOT NULL,
    pessoas INT(11) NOT NULL,
    data_criacao TIMESTAMP DEFAULT CURRENT_TIMESTAMP	);
Coluna	Tipo de Dados	Descri√ß√£o
id	INT (PK, Auto-Increment)	Identificador √∫nico de cada reserva.
nome, email, telefone	VARCHAR	Dados de contacto do cliente.
data, hora	DATE, TIME	Data e hora da reserva efetuada.
pessoas	INT	N√∫mero de pessoas por reserva.
data_criacao	TIMESTAMP	Registo autom√°tico da data/hora de inser√ß√£o.

3.7 Testes de Conectividade e Operacionalidade
Para validar a comunica√ß√£o entre os componentes da stack LAMP, foi criado o ficheiro de teste /var/www/html/dbtest.php, respons√°vel por testar a liga√ß√£o entre PHP e MariaDB.
Valida√ß√£o via browser:
Ao aceder a http://192.168.1.100/dbtest.php, o sistema exibiu a mensagem ‚ÄúConex√£o bem-sucedida ao MariaDB!‚Äù, confirmando o correto funcionamento da stack.
Resumo de Valida√ß√£o Final:
Servi√ßo	Estado	Comando de Verifica√ß√£o
Apache	‚úÖ Ativo	systemctl status httpd
PHP	‚úÖ Vers√£o 8.x	php -v
MariaDB	‚úÖ Ativo e Protegido	systemctl status mariadb
Firewall	‚úÖ Porta 80 aberta	firewall-cmd --list-all
Medida de seguran√ßa final:
Ap√≥s os testes, os ficheiros info.php e dbtest.php foram removidos do servidor para evitar a exposi√ß√£o de informa√ß√µes sens√≠veis.
Cap√≠tulo 4 ‚Äì Conectividade e Acesso Seguro (IP P√∫blico e SSL)
Cap√≠tulo 4.1 ‚Äî Configurar o servi√ßo DuckDNS
Este guia descreve como configurar o servi√ßo DuckDNS para atualizar automaticamente o IP p√∫blico associado ao dom√≠nio din√¢mico do seu servidor CentOS, garantindo a acessibilidade externa e o correto funcionamento do Certbot (SSL/TLS).



üåê Etapa 1 ‚Äî A√ß√µes Essenciais no Website DuckDNS
Antes de executar qualquer comando no servidor CentOS, √© obrigat√≥rio concluir tr√™s a√ß√µes diretamente no site do DuckDNS:
üëâ https://www.duckdns.org/
1. Cria√ß√£o da Conta e Login
‚Ä¢	A√ß√£o: Acesse o site e inicie sess√£o (por exemplo, com a sua conta Google).
‚Ä¢	Resultado: Sua conta DuckDNS ser√° criada automaticamente.

2. Registo do Subdom√≠nio (Dom√≠nio Din√¢mico)
‚Ä¢	A√ß√£o: Na p√°gina principal, registe o subdom√≠nio desejado.
‚Ä¢	Exemplo: sabordomar.duckdns.org
‚Ä¢	Resultado: O dom√≠nio ser√° associado ao seu IP p√∫blico atual.

3. Obten√ß√£o do Token de Autentica√ß√£o (Chave Secreta)
‚Ä¢	A√ß√£o: Ap√≥s o registo, copie o Token de Autentica√ß√£o exibido na sua conta (uma longa string alfanum√©rica).
‚Ä¢	Prop√≥sito: Este token √© usado pelo script duck.sh para autenticar a atualiza√ß√£o do IP.
üìå Importante:
No seu script, substitua <SEU_TOKEN> pela chave obtida no site.
Exemplo:
hit="https://www.duckdns.org/update?domains=sabordomar&token=<SEU_TOKEN>&ip="
Sem o token correto, o script no crontab n√£o funcionar√°.

üñ•Ô∏è Etapa 2 ‚Äî Implementa√ß√£o no Servidor CentOS
1. Criar o Diret√≥rio de Trabalho
Crie e acesse um diret√≥rio dedicado para os ficheiros do DuckDNS:
mkdir duckdns
cd duckdns

2. Criar o Script de Atualiza√ß√£o (duck.sh)
Crie o ficheiro usando um editor de texto (por exemplo, vi ou nano):
vi duck.sh
Conte√∫do do script:
Substitua <SEU_TOKEN> pelo token obtido no site DuckDNS.
#!/bin/bash
echo url="https://www.duckdns.org/update?domains=sabordomar&token=<SEU_TOKEN>&ip=" | curl -k -o ~/duckdns/duck.log -K -
DATA=$(date)
echo -e "\n${DATA} OK" >> ~/duckdns/duck.log
üí° Este script faz uma requisi√ß√£o HTTPS ao DuckDNS e registra o resultado no ficheiro duck.log.

3. Tornar o Script Execut√°vel
Defina as permiss√µes de execu√ß√£o:		chmod 700 duck.sh

4. Agendar a Atualiza√ß√£o Autom√°tica (cron)
Abra o crontab:	crontab -e
Adicione a linha abaixo no final do arquivo:	*/5 * * * * ~/duckdns/duck.sh >/dev/null 2>&1

üîÅ Este comando garante que o script seja executado a cada 5 minutos, atualizando automaticamente o IP p√∫blico no DuckDNS.

üîç Etapa 3 ‚Äî Verifica√ß√£o e Testes
Verificar se o cron est√° ativo	->	ps -ef | grep cr[o]n
Verificar se o curl est√° instalado ->	curl --version
Testar manualmente o script ->	./duck.sh
Verificar o log do DuckDNS ->		cat duck.log

‚úÖ Resumo Final

Etapa	Descri√ß√£o	Comando Principal
1	Criar conta e registar dom√≠nio no site DuckDNS	Acesso via navegador
2	Criar diret√≥rio e script duck.sh	mkdir duckdns && cd duckdns
3	Substituir <SEU_TOKEN> pelo token real	Editar duck.sh
4	Tornar o script execut√°vel	chmod 700 duck.sh
5	Agendar no cron	crontab -e
6	Testar e verificar log	./duck.sh e cat duck.log

4.2. Configura√ß√£o do Apache para Acesso Cifrado (HTTPS)
O Apache foi configurado para responder a pedidos HTTP e HTTPS, com o objetivo de for√ßar o redirect de todo o tr√°fego n√£o seguro para a porta 443, usando um certificado Let's Encrypt v√°lido.
A. Configura√ß√£o dos Listeners do Apache
As diretivas Listen foram confirmadas para aceitar o tr√°fego nas portas de servi√ßo:
‚Ä¢	HTTP: Listen 80
‚Ä¢	HTTPS: Listen 443 https
Passos para adicionar o Let‚Äôs Encrypt (Certbot)
A√ß√£o	Comando
1Ô∏è‚É£ Instalar pacotes	sudo dnf install mod_ssl openssl certbot python3-certbot-apache -y
‚öôÔ∏è 2Ô∏è‚É£ Criar certificados tempor√°rios (para o Apache arrancar)
sudo mkdir -p /etc/pki/tls/certs /etc/pki/tls/private
sudo openssl req -x509 -nodes -days 1 \
  -newkey rsa:2048 \
  -keyout /etc/pki/tls/private/localhost.key \
  -out /etc/pki/tls/certs/localhost.crt \
  -subj "/C=PT/ST=Lisboa/L=Lisboa/O=SaborDoMar/OU=IT/CN=localhost"
üåê 3Ô∏è‚É£ Criar VirtualHost HTTP (porta 80)
<VirtualHost *:80>
    ServerName sabordomar.duckdns.org
    DocumentRoot /var/www/html
    Redirect permanent / https://sabordomar.duckdns.org/
</VirtualHost>

 üîê 4Ô∏è‚É£ Criar certificados Let‚Äôs Encrypt simulados
sudo mkdir -p /etc/letsencrypt/live/sevenseas.com/

sudo openssl req -x509 -nodes -days 365 \
  -newkey rsa:2048 \
  -keyout /etc/letsencrypt/live/sevenseas.com/privkey.pem \
  -out /etc/letsencrypt/live/sevenseas.com/fullchain.pem \
  -subj "/C=PT/ST=Lisboa/L=Lisboa/O=SevenSeas/OU=IT/CN=sevenseas.com"

üßæ 5Ô∏è‚É£ Configurar SSL no Apache
sudo nano /etc/httpd/conf.d/ssl.conf
<VirtualHost *:443>
    ServerName sabordomar.duckdns.org
    ServerAdmin webmaster@sabordomar.duckdns.org
    DocumentRoot "/var/www/html"

    ErrorLog logs/sabordomar_ssl_error.log
    CustomLog logs/sabordomar_ssl_access.log combined
	
    <Directory "/var/www/html">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/sabordomar.duckdns.org/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/sabordomar.duckdns.org/privkey.pem
    
    SSLProtocol all -SSLv2 -SSLv3
    SSLCipherSuite HIGH:!aNULL:!MD5
    Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
    
</VirtualHost>

üîÅ 6Ô∏è‚É£ Validar e reiniciar
sudo apachectl configtest
sudo systemctl restart httpd
sudo systemctl enable httpd
Cap√≠tulo 5 ‚Äì Seguran√ßa do Servidor (Hardening)
5.1 Objetivo
Este cap√≠tulo apresenta as medidas de seguran√ßa e endurecimento (hardening) aplicadas ao servidor CentOS Stream 9, com o objetivo de reduzir a superf√≠cie de ataque e garantir a integridade dos servi√ßos LAMP, do sistema operativo e do acesso administrativo remoto.
5.2 Atualiza√ß√£o e Patches do Sistema
A atualiza√ß√£o cont√≠nua do sistema √© essencial para eliminar vulnerabilidades conhecidas. O servidor foi mantido com os pacotes mais recentes e o kernel atualizado.
Implementa√ß√£o:
1.	Atualiza√ß√£o Completa:
sudo dnf update -y
2.	Verifica√ß√£o:
Confirmada a vers√£o atual do kernel e aus√™ncia de atualiza√ß√µes pendentes, assegurando que o sistema se encontra em conformidade com as √∫ltimas corre√ß√µes de seguran√ßa.
5.3 Gest√£o de Utilizadores e Permiss√µes
A administra√ß√£o do servidor foi configurada de acordo com o princ√≠pio do m√≠nimo privil√©gio, criando uma conta administrativa segura e desativando o acesso root via SSH.
A√ß√£o	Comando / Ficheiro	Descri√ß√£o
Criar utilizador administrativo	sudo adduser adminsys
sudo usermod -aG wheel adminsys	Cria√ß√£o de um utilizador n√£o-root com permiss√µes sudo.
Desativar login root via SSH	sudo nano /etc/ssh/sshd_config ‚Üí PermitRootLogin no	Impede tentativas de ataque direto √† conta root.
Reiniciar servi√ßo SSH	sudo systemctl restart sshd	Aplica imediatamente as altera√ß√µes de seguran√ßa.

As medidas de seguran√ßa do servi√ßo SSH foram refor√ßadas atrav√©s da limita√ß√£o de acesso remoto, desativa√ß√£o do login root e utiliza√ß√£o exclusiva de um utilizador administrativo com privil√©gios sudo.



5.4 Configura√ß√£o de Firewall (firewalld)
Foi configurada uma pol√≠tica de ‚ÄúDeny by Default‚Äù, permitindo apenas os servi√ßos essenciais √† opera√ß√£o e administra√ß√£o do servidor.
A√ß√£o	Comando	Servi√ßo / Porta Aberta
Permitir SSH	sudo firewall-cmd --permanent --add-service=ssh	Porta 22 (Acesso remoto administrativo).
Permitir HTTP	sudo firewall-cmd --permanent --add-service=http	Porta 80 (Redirecionamento para HTTPS).
Permitir HTTPS	sudo firewall-cmd --permanent --add-service=https	Porta 443 (Tr√°fego web seguro).
Recarregar regras	sudo firewall-cmd --reload	Aplica imediatamente as altera√ß√µes.

5.5 Prote√ß√£o Contra Ataques ‚Äì Fail2ban
Foi implementado o Fail2ban para monitorizar tentativas de login falhadas e bloquear automaticamente endere√ßos IP suspeitos, prevenindo ataques de for√ßa bruta.
A√ß√£o	Comando / Altera√ß√£o	Descri√ß√£o
Instalar Fail2ban	sudo dnf install fail2ban -y	Instala o pacote principal.
Criar ficheiro de configura√ß√£o local	sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local	Isola as personaliza√ß√µes de configura√ß√£o.
Ajustar regras	Editar /etc/fail2ban/jail.local:
maxretry = 3
bantime = 3600	Bloqueio de IP ap√≥s 3 tentativas falhadas durante 1 hora.
Ativar jails	Ativar nas sec√ß√µes [sshd] e [apache-auth] ‚Üí enabled = true	Monitora logins SSH e autentica√ß√µes web.
Ativar o servi√ßo	sudo systemctl enable --now fail2ban	Inicia e ativa automaticamente o servi√ßo.
Foi executada uma auditoria das portas abertas no sistema para confirmar que apenas os servi√ßos indispens√°veis estavam acess√≠veis externamente.
sudo ss -tuln
Resultado esperado: Apenas as portas 22 (SSH), 80 (HTTP) e 443 (HTTPS) permanecem ativas, garantindo o m√≠nimo de exposi√ß√£o da superf√≠cie de ataque.
5.6 Auditoria e Monitoriza√ß√£o
A monitoriza√ß√£o cont√≠nua de logs garante a dete√ß√£o precoce de incidentes e facilita a rastreabilidade administrativa.
‚Ä¢	Logs do Sistema:
/var/log/secure ‚Äì regista tentativas de autentica√ß√£o.
/var/log/messages ‚Äì armazena eventos e erros gerais do sistema.
‚Ä¢	Logs do Apache:
Implementados no VirtualHost HTTPS para isolar o tr√°fego do website:
o	ErrorLog /var/log/httpd/lamp-error.log
o	CustomLog /var/log/httpd/lamp-access.log combined

5.10 Implementa√ß√£o do Web Application Firewall (ModSecurity)
A√ß√£o	Comando / Ficheiro	Descri√ß√£o
Instalar o m√≥dulo WAF	sudo dnf install mod_security -y	Adiciona o ModSecurity ao Apache.
Instalar regras OWASP CRS	cd /etc/httpd/
sudo mkdir -p modsecurity-crs
cd modsecurity-crs
sudo git clone https://github.com/coreruleset/coreruleset.git
sudo mv coreruleset/* .	Instala o conjunto de regras padr√£o de seguran√ßa.

sudo cp rules/REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf.example rules/REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf

sudo cp rules/RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf.example rules/RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf
Ativar modo de bloqueio	Editar /etc/httpd/conf.d/mod_security.conf ‚Üí SecRuleEngine On	Coloca o WAF em modo ativo (bloqueio).
Validar funcionamento	Simular inje√ß√£o XSS no URL	O pedido √© bloqueado e retorna ‚Äú403 Forbidden‚Äù.
Reiniciar Apache	sudo systemctl restart httpd	Aplica as configura√ß√µes do WAF.

Depois, no ficheiro nano /etc/httpd/conf.d/mod_security.conf, adiciona:

IncludeOptional /etc/httpd/modsecurity-crs/crs-setup.conf
IncludeOptional /etc/httpd/modsecurity-crs/rules/*.conf

E reinicia:
sudo systemctl restart httpd

5.11 Ajustes Adicionais de Seguran√ßa (SELinux e Firewalld)
‚Ä¢	SELinux: Mantido em modo enforcing (Controlo de Acesso Obrigat√≥rio), garantindo que processos como Apache e MariaDB operam apenas dentro das permiss√µes definidas.
getenforce         			# Verifica o estado atual (resultado esperado: Enforcing)
sudo nano /etc/selinux/config   	# Confirmar SELINUX=enforcing

‚Ä¢	Firewalld: Verificado e mantido ativo em tempo integral, garantindo isolamento de tr√°fego e bloqueio de pacotes n√£o autorizados.
5.12 Autentica√ß√£o B√°sica no Painel Administrativo
Para proteger o acesso √† p√°gina administrativa (reservas_admin.php), foi configurada autentica√ß√£o b√°sica (Basic Auth) no Apache.
1.	Cria√ß√£o do ficheiro de credenciais:
sudo htpasswd -c /etc/httpd/.htpasswd admin
# Defini√ß√£o de password para o utilizador "admin"
Alterar o user em nano /var/www/html/processa_reserva.php
E em nano /var/www/html/reservas_admin.php

2.	Configura√ß√£o do ficheiro .htaccess (no diret√≥rio /var/www/html):
AuthType Basic
AuthName "Acesso Restrito - Sabor do Mar Reservas"
AuthUserFile /etc/httpd/.htpasswd
Require valid-user

<Files reservas_admin.php>
Require valid-user
</Files>

Resultado:
Somente utilizadores autenticados podem aceder ao painel administrativo, prevenindo o acesso indevido e refor√ßando a seguran√ßa da aplica√ß√£o web.
5.13 Conclus√£o
Ap√≥s a aplica√ß√£o das medidas de hardening, o servidor encontra-se protegido em m√∫ltiplas camadas:
‚Ä¢	Rede: Firewall configurada e portas minimizadas.
‚Ä¢	Sistema Operativo: SELinux ativo e contas administradas com privil√©gio m√≠nimo.
‚Ä¢	Servi√ßos: Prote√ß√£o com Fail2ban e ModSecurity.
‚Ä¢	Aplica√ß√£o: Autentica√ß√£o b√°sica e logs dedicados.
Cap√≠tulo 6 ‚Äì Otimiza√ß√£o de Desempenho (Tuning)
6.1. Tuning do PHP (php.ini)
As otimiza√ß√µes do PHP foram aplicadas no ficheiro principal de configura√ß√£o nano /etc/php.ini, com foco na melhoria de desempenho, estabilidade e seguran√ßa do ambiente de execu√ß√£o das aplica√ß√µes web.
Diretiva	Valor Aplicado	Comando / Altera√ß√£o	Prop√≥sito
date.timezone	Europe/Lisbon	date.timezone = Europe/Lisbon	Garante a precis√£o de logs e opera√ß√µes baseadas em hora local.
memory_limit	256M	memory_limit = 256M	Aumenta o limite de mem√≥ria por script, melhorando a estabilidade de aplica√ß√µes mais complexas.
upload_max_filesize	20M	upload_max_filesize = 20M	Define o tamanho m√°ximo permitido para upload de ficheiros.
post_max_size	25M	post_max_size = 25M	Determina o limite m√°ximo de dados aceites em requisi√ß√µes POST.
display_errors	Off	display_errors = Off	Oculta mensagens de erro t√©cnicas ao utilizador final, aumentando a seguran√ßa.
Aplica√ß√£o das altera√ß√µes:
sudo systemctl restart httpd
O servi√ßo Apache foi reiniciado para que o PHP recarregasse as novas configura√ß√µes.
6.2. Tuning do MariaDB (my.cnf)
As configura√ß√µes do MariaDB foram otimizadas para melhorar o desempenho das consultas e a gest√£o de mem√≥ria. As altera√ß√µes foram realizadas no ficheiro nano /etc/my.cnf.d/mariadb-server.cnf, dentro da sec√ß√£o [mysqld].
Par√¢metro	Valor Aplicado	Descri√ß√£o T√©cnica
innodb_buffer_pool_size	1G	Cache principal de dados e √≠ndices; ajustado para cerca de 60% da RAM dispon√≠vel (2GB).
innodb_log_file_size	256M	Melhora o desempenho em opera√ß√µes intensivas de escrita (INSERT/UPDATE).
max_connections	100	Limita as conex√µes simult√¢neas para evitar sobrecarga.
query_cache_size	32M	Mant√©m resultados de consultas repetidas em cache, reduzindo o tempo de resposta.

Aplica√ß√£o das altera√ß√µes:
sudo systemctl restart mariadb
O servi√ßo MariaDB foi reiniciado para aplicar os novos par√¢metros de desempenho.
6.3. Tuning do Apache (HTTPD)
As otimiza√ß√µes no Apache concentraram-se em melhorar a compress√£o, reduzir lat√™ncias e otimizar o processamento de conex√µes simult√¢neas.
6.3.1. Ativa√ß√£o de M√≥dulos de Compress√£o e Cache
O m√≥dulo mod_deflate foi ativado para reduzir o tamanho dos ficheiros enviados ao cliente, otimizando o tempo de carregamento das p√°ginas.
Trecho configurado em nano /etc/httpd/conf/httpd.conf:
# Ativa compress√£o Gzip para ficheiros de texto e c√≥digo
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/javascript
</IfModule>

6.3.2. Otimiza√ß√£o de Conex√µes e Timeouts
Os tempos de espera e a gest√£o de conex√µes persistentes foram ajustados para um equil√≠brio entre desempenho e efici√™ncia de recursos.
Diretiva	Valor Aplicado	Justifica√ß√£o T√©cnica
KeepAlive	On	Permite m√∫ltiplos pedidos na mesma conex√£o TCP, reduzindo overhead.
KeepAliveTimeout	5	Liberta conex√µes ociosas rapidamente, ideal para websites leves.
Timeout	60	Reduz o tempo m√°ximo de espera por respostas do cliente.
Essas configura√ß√µes melhoram o tempo de resposta e diminuem o consumo de mem√≥ria sob carga.
6.3.3. Ajuste do MPM (Multi-Processing Module)
O MPM Event foi otimizado para suportar m√∫ltiplas conex√µes simult√¢neas com melhor utiliza√ß√£o de threads.
Em nano /etc/httpd/conf.modules.d/00-mpm.conf MaxRequestWorkers foi ajustado para 150, equilibrando o desempenho com os recursos limitados (2 vCPUs / 2GB RAM).
Aplica√ß√£o final das configura√ß√µes:
sudo systemctl restart httpd
Ap√≥s o rein√≠cio, o Apache passou a operar com compress√£o Gzip ativa, menor lat√™ncia e melhor gest√£o de recursos sob carga simult√¢nea.
6.4. Conclus√£o
Com as otimiza√ß√µes aplicadas, o ambiente LAMP alcan√ßou:
‚Ä¢	PHP: scripts mais est√°veis e eficientes.
‚Ä¢	MariaDB: consultas mais r√°pidas e melhor uso da mem√≥ria.
‚Ä¢	Apache: carregamento mais r√°pido e melhor resposta sob m√∫ltiplos acessos.
Essas melhorias garantem um ambiente de alojamento web robusto, eficiente e preparado para produ√ß√£o, mantendo o equil√≠brio entre desempenho e seguran√ßa.
Cap√≠tulo 7 ‚Äì Manuten√ß√£o e Continuidade de Servi√ßo
7.1 Objetivo
Este cap√≠tulo descreve as medidas implementadas para garantir a disponibilidade cont√≠nua, integridade e fiabilidade do servidor LAMP a longo prazo.
As pr√°ticas incluem backups autom√°ticos, sincroniza√ß√£o hor√°ria, atualiza√ß√µes de seguran√ßa autom√°ticas, rota√ß√£o de logs e valida√ß√£o de continuidade de servi√ßo, assegurando a recupera√ß√£o r√°pida em caso de falhas.
7.2 Configura√ß√£o de Backups Di√°rios
Foi criada uma rotina automatizada de backup di√°rio para salvaguardar a base de dados e os ficheiros do website, garantindo a recupera√ß√£o do sistema em caso de falha.
A√ß√£o	Comando / Configura√ß√£o	Descri√ß√£o
Criar diret√≥rio seguro	sudo mkdir -p /backup/lamp
sudo chown -R root:root /backup/lamp	Diret√≥rio protegido, acess√≠vel apenas ao utilizador root.
Criar script de backup	touch /backup/lamp/backup_lamp.sh	Script respons√°vel por exportar a base de dados (mysqldump) e compactar os ficheiros web (tar -czf).
Tornar o script execut√°vel	sudo chmod +x /backup/lamp/backup_lamp.sh	Permite a execu√ß√£o autom√°tica do script.
Agendar execu√ß√£o di√°ria	sudo crontab -e ‚Üí adicionar linha:
0 2 * * * /backup/lamp/backup_lamp.sh	Define o agendamento di√°rio √†s 02:00 atrav√©s do cron.
O backup di√°rio √© guardado com carimbo de data (ex: db_YYYY-MM-DD.sql e www_YYYY-MM-DD.tar.gz), permitindo vers√µes hist√≥ricas de restaura√ß√£o.
7.3 Sincroniza√ß√£o Hor√°ria via NTP (chronyd)
A sincroniza√ß√£o hor√°ria √© essencial para garantir a coer√™ncia dos logs, certificados e agendamentos.
O servi√ßo Chrony foi configurado para sincronizar o rel√≥gio do sistema com servidores NTP confi√°veis.
A√ß√£o	Comando
Instalar servi√ßo	sudo dnf install chrony -y
Ativar e iniciar	sudo systemctl enable chronyd
sudo systemctl start chronyd
Verificar sincroniza√ß√£o	chronyc sources
Resultado: o servidor mostra estado ‚ÄúReachable‚Äù e ‚ÄúSynchronized‚Äù com as fontes NTP configuradas.
7.4 Configura√ß√£o de Atualiza√ß√µes Autom√°ticas
Para manter o sistema protegido sem necessidade de interven√ß√£o manual, foi implementado o dnf-automatic, respons√°vel por aplicar patches e atualiza√ß√µes de seguran√ßa automaticamente.
A√ß√£o	Comando / Ficheiro	Descri√ß√£o
Instalar o servi√ßo	sudo dnf install dnf-automatic -y	Adiciona o m√≥dulo de atualiza√ß√£o autom√°tica.
Configurar aplica√ß√£o autom√°tica	nano /etc/dnf/automatic.conf ‚Üí apply_updates = yes	Define pol√≠tica para aplicar atualiza√ß√µes automaticamente.
Ativar o timer do systemd	sudo systemctl enable --now dnf-automatic.timer	Agenda a execu√ß√£o peri√≥dica das atualiza√ß√µes.
7.5 Monitoriza√ß√£o de Logs e Rota√ß√£o Autom√°tica
Para evitar que os ficheiros de log cres√ßam indefinidamente e comprometam o espa√ßo em disco, foi configurada a rota√ß√£o autom√°tica de logs com o utilit√°rio logrotate.
A√ß√£o	Configura√ß√£o / Ficheiro	Detalhe
Definir logs do Apache	nano /etc/httpd/conf/httpd.conf ‚Üí ErrorLog /var/log/httpd/error.log	Centraliza o registo de erros e acessos.
Configurar rota√ß√£o autom√°tica	nano /etc/logrotate.d/lamp	Define rota√ß√£o di√°ria, compress√£o e rein√≠cio do Apache ap√≥s rota√ß√£o.
Exemplo de configura√ß√£o /etc/logrotate.d/lamp:

/var/log/httpd/*.log {
    daily
    rotate 7
    compress
    missingok
    notifempty
    postrotate
        /bin/systemctl reload httpd > /dev/null 2>/dev/null || true
    endscript }
7.6 Valida√ß√£o de Continuidade de Servi√ßo
A fiabilidade do servidor foi testada atrav√©s de simula√ß√µes de falha, recupera√ß√£o e restaura√ß√£o.
1.	Simula√ß√£o de Falha:
sudo systemctl stop httpd
O website torna-se inacess√≠vel, simulando uma falha real.
2.	Recupera√ß√£o do Servi√ßo:
sudo systemctl start httpd
A p√°gina volta a carregar normalmente, confirmando a recupera√ß√£o funcional.
3.	Teste de Restaura√ß√£o de Backup:
tar -xzf /backup/lamp/www_YYYY-MM-DD.tar.gz -C /var/www/html
mysql -u root -p'SuaSenha' < /backup/lamp/db_YYYY-MM-DD.sql

O website e a base de dados foram restaurados com sucesso, validando o procedimento de recupera√ß√£o.
7.7 Boas Pr√°ticas de Manuten√ß√£o
As seguintes rotinas foram definidas para garantir a sa√∫de e continuidade do ambiente LAMP:
‚Ä¢	Verifica√ß√£o di√°ria dos logs do Apache e dos bloqueios autom√°ticos do Fail2ban.
‚Ä¢	Confirma√ß√£o do funcionamento dos backups autom√°ticos e espa√ßo em disco dispon√≠vel.
‚Ä¢	Monitoriza√ß√£o do desempenho de Apache, PHP e MariaDB.
‚Ä¢	Renova√ß√£o antecipada de certificados SSL/TLS antes do prazo de expira√ß√£o.
‚Ä¢	Aplica√ß√£o manual de atualiza√ß√µes cr√≠ticas quando necess√°rio.
7.8 Conclus√£o
Com as pol√≠ticas de backup, sincroniza√ß√£o, atualiza√ß√£o e monitoriza√ß√£o devidamente implementadas, o servidor LAMP apresenta agora:
‚Ä¢	Alta resili√™ncia e disponibilidade cont√≠nua (24/7);
‚Ä¢	Capacidade de restaura√ß√£o r√°pida em caso de falha;
‚Ä¢	Atualiza√ß√µes autom√°ticas sem necessidade de interven√ß√£o humana;
‚Ä¢	Monitoriza√ß√£o e gest√£o de logs eficiente e organizada.
Estas pr√°ticas asseguram que o ambiente permanece est√°vel, atualizado e preparado para opera√ß√£o em produ√ß√£o.
Cap√≠tulo 8 ‚Äì Valida√ß√£o, Resultados e Documenta√ß√£o Final
8.1. Objetivo
O objetivo deste cap√≠tulo √© confirmar, atrav√©s de testes pr√°ticos, que o ambiente LAMP implementado est√° totalmente operacional, seguro e otimizado, de acordo com os requisitos definidos no projeto. O resultado visa validar a disponibilidade, a integridade e a seguran√ßa do sistema.
8.2. Testes Funcionais, de Desempenho e Anexos (Configura√ß√µes e Logs)
8.2.1. Apache Ativo  
8.2.2 PHP Instalado
  
8.2.3 Estrutura DB
 
8.2.4 Acesso HTTPS
 
8.2.5 Redirecionamento
 
8.2.6 Validade SSL
 
8.2.7 Backup Criado
 
8.2.8 FirewallD Ativo/Portas
 
8.2.9 Fail2ban (Bloqueio)
 
 
8.2.10 ModSecurity (WAF) 
 
 
8.2.11 Tuning PHP 
 
 
 
 
 

8.2.12 Tuning MariaDB
 
8.2.13 Agendamento Cron
 

8.2.14 httpd.conf
 

8.2.15 php.ini
 

8.2.16 my.cnf
 

8.2.17 chronyc sources
 

8.2.18 VirtualHost SSL
 

8.2.19 Scripts de Backup
 
‚ÄÉ
8.2. Valida√ß√£o dos Resultados Esperados
A valida√ß√£o final comprovou o sucesso na integra√ß√£o de todos os servi√ßos e componentes de seguran√ßa.
Itens Validados:
‚Ä¢	‚úÖServidor Apache: Responde corretamente a requisi√ß√µes HTTP e HTTPS.
‚Ä¢	‚úÖPHP: Processa scripts din√¢micos sem erros e com os par√¢metros otimizados ativos.
‚Ä¢	‚úÖMariaDB: Armazena e recupera dados corretamente, com o servi√ßo protegido e otimizado.
‚Ä¢	‚úÖSSL/TLS: Implementado e funcional, com redirect autom√°tico da porta 80 para a 443.
‚Ä¢	‚úÖHardening: Configura√ß√µes de seguran√ßa (Fail2ban, ModSecurity, FirewallD) aplicadas e ativas.
‚Ä¢	‚úÖBackups: Rotinas autom√°ticas de backup geram arquivos v√°lidos e seguros.
8.2.2. Checklist de Seguran√ßa Validada
O checklist de seguran√ßa verificou e confirmou que todas as medidas de hardening exigidas no Cap√≠tulo 4 foram aplicadas com sucesso.
Valida√ß√µes Chave:
‚Ä¢	‚úÖLogin root SSH: Desativado (PermitRootLogin no).
‚Ä¢	‚úÖFail2ban: Servi√ßo ativo e a monitorizar os logs SSH e Apache.
‚Ä¢	‚úÖFirewallD: Apenas portas 22, 80 e 443 abertas ao exterior.
‚Ä¢	‚úÖSELinux: Ativo em modo enforcing.
‚Ä¢	‚úÖModSecurity (WAF): Ativo com as regras OWASP CRS.
‚Ä¢	‚úÖSSL/TLS: Certificado ativo e redirect a funcionar.
8.3. Conclus√£o e Li√ß√µes Aprendidas
O projeto de infraestrutura LAMP foi conclu√≠do com sucesso, resultando num servidor CentOS Stream 10 que est√° totalmente operacional, seguro e otimizado.
Resultados Finais Validados
A infraestrutura cumpre todos os requisitos do projeto, destacando-se:
‚Ä¢	Seguran√ßa em Camadas: O ModSecurity (WAF) protegeu contra vulnerabilidades de aplica√ß√£o (XSS/SQLi), enquanto o Fail2ban e o FirewallD garantiram a seguran√ßa de rede e de acesso remoto.
‚Ä¢	Performance Otimizada (Tuning): Os ajustes de tuning no Apache (MPM Event) e no MariaDB (ajustes de buffer pool e max_connections) resultaram num ambiente com tempos de resposta significativamente melhorados.
‚Ä¢	Continuidade de Servi√ßo: A ativa√ß√£o das rotinas de backups di√°rios, atualiza√ß√µes autom√°ticas e sincroniza√ß√£o NTP asseguram a resili√™ncia e a capacidade de recupera√ß√£o r√°pida do sistema.
‚Ä¢	Acesso Seguro: O site opera em produ√ß√£o simulada com um Certificado Let's Encrypt v√°lido.
Li√ß√µes Aprendidas
O projeto refor√ßou a import√¢ncia de testar cada componente de seguran√ßa em isolamento e destacou que a performance ideal depende do dimensionamento correto dos recursos de software (MPM, Buffer Pool) para a hardware dispon√≠vel, o que foi o foco principal do tuning do servidor.
